<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="Lovable" etag="generated" version="24.7.17">
  <diagram name="TUPÃ Hub Architecture" id="architecture">
    <mxGraphModel dx="1422" dy="994" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1369" pageHeight="1027" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Mobile User for new sequence -->
        <mxCell id="mobile-user" value="ðŸ“± Mobile User" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Usuario -->
        <mxCell id="user" value="ðŸ‘¤ Usuario" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Admin Usuario -->
        <mxCell id="admin-user" value="ðŸ‘‘ Admin User" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Frontend Layer -->
        <mxCell id="frontend-layer" value="ðŸŒ FRONTEND LAYER" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="220" y="120" width="280" height="280" as="geometry" />
        </mxCell>
        
        <!-- CourseForm Component with mobile optimization -->
        <mxCell id="course-form" value="ðŸ“± CourseForm&#xa;ðŸ” Lazy Search + ðŸ“Š 50 Limit" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="60" width="160" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="react-app" value="React App&#xa;(Vite + TypeScript)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="240" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="location-context" value="Location Context&#xa;(React Context)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="380" y="160" width="100" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="login-page" value="/login&#xa;(Auth Page)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="240" y="240" width="80" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="admin-panel" value="Admin Panel&#xa;(Dashboard)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="340" y="240" width="80" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="pos-integration" value="POS Integration&#xa;(Fudo, BistroSoft)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="440" y="240" width="80" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="location-switcher" value="Location Switcher&#xa;(Multi-location)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="240" y="300" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="location-override" value="All Locations&#xa;(Admin Override)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="360" y="300" width="100" height="40" as="geometry" />
        </mxCell>
        
        <!-- Backend Layer -->
        <mxCell id="backend-layer" value="âš¡ BACKEND LAYER" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="580" y="120" width="320" height="280" as="geometry" />
        </mxCell>
        
        <!-- Mobile API Endpoint -->
        <mxCell id="mobile-api" value="ðŸ“± Instructor API&#xa;fields=id,name&#xa;limit=50" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="580" y="60" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="location-middleware" value="ðŸŒ Location Middleware&#xa;(Context Filter)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="140" width="140" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="edge-functions" value="Supabase&#xa;Edge Functions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="760" y="140" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="location-context-func" value="/location-context" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="600" y="210" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="set-location-func" value="/set-location" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="690" y="210" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="refresh-token" value="/refresh-token-test" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="600" y="250" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="sync-pos" value="/sync-client-pos" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="690" y="250" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="test-connections" value="/test-pos-connection&#xa;/test-odoo-connection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="780" y="210" width="80" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="admin-override" value="Admin Override&#xa;(all_locations=true)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="780" y="260" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="backend-services" value="Backend Services&#xa;(Location Aware)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="600" y="320" width="140" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="context-propagation" value="Context Propagation&#xa;(location_id filter)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="320" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- Database Layer -->
        <mxCell id="database-layer" value="ðŸ—„ï¸ DATABASE LAYER" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="220" y="400" width="640" height="160" as="geometry" />
        </mxCell>
        
        <mxCell id="supabase-db" value="Supabase PostgreSQL&#xa;(Auth + RLS + Tables)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="240" y="440" width="150" height="60" as="geometry" />
        </mxCell>
        
        <!-- Instructors table with mobile optimization -->
        <mxCell id="instructors-table" value="ðŸ“± instructors&#xa;SELECT id,name&#xa;LIMIT 50" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="420" y="380" width="80" height="40" as="geometry" />
        </mxCell>
        
        <!-- Location-aware tables -->
        <mxCell id="groups-table" value="groups&#xa;(audited)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="420" y="420" width="60" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="locations-table" value="locations&#xa;(audited)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="490" y="420" width="60" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="users-table" value="users&#xa;(location_id)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="560" y="420" width="70" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="recipes-table" value="recipes&#xa;(location_id)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="420" y="455" width="70" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="consumptions-table" value="consumptions&#xa;(location_id)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="500" y="455" width="90" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="clients-table" value="clients&#xa;(audited)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="600" y="455" width="70" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="orders-table" value="orders&#xa;(location_id)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="680" y="455" width="70" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="client-configs" value="client_configs&#xa;(audited)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="640" y="420" width="80" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="integration-logs" value="integration_logs&#xa;(audited)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="730" y="420" width="80" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="user-roles" value="user_roles" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="420" y="490" width="80" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="auth-users" value="auth.users&#xa;(Supabase Auth)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="510" y="490" width="80" height="25" as="geometry" />
        </mxCell>
        
        <!-- External Services -->
        <mxCell id="external-services" value="ðŸŒ SERVICIOS EXTERNOS" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="920" y="120" width="200" height="440" as="geometry" />
        </mxCell>
        
        <mxCell id="supabase-service" value="â˜ï¸ Supabase&#xa;(Backend as a Service)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="940" y="160" width="160" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="lovable-hosting" value="ðŸš€ Lovable&#xa;(Hosting & Deploy)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="940" y="230" width="160" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="sentry" value="ðŸ› Sentry&#xa;(Error Monitoring)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="940" y="300" width="160" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="pos-systems" value="ðŸª POS Systems&#xa;(Fudo, BistroSoft)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="940" y="370" width="160" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="odoo" value="ðŸ“Š Odoo ERP&#xa;(Business Management)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="940" y="440" width="160" height="50" as="geometry" />
        </mxCell>
        
        <!-- Mobile optimization sequence arrows -->
        <!-- Mobile User to CourseForm -->
        <mxCell id="arrow-mobile-user" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#d79b00;" edge="1" parent="1" source="mobile-user" target="course-form">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="160" y="110" as="sourcePoint" />
            <mxPoint x="240" y="85" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- CourseForm to Mobile API -->
        <mxCell id="arrow-form-api" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#d79b00;" edge="1" parent="1" source="course-form" target="mobile-api">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="85" as="sourcePoint" />
            <mxPoint x="580" y="85" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Mobile API to Supabase -->
        <mxCell id="arrow-api-supabase" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#d79b00;" edge="1" parent="1" source="mobile-api" target="supabase-service">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="700" y="85" as="sourcePoint" />
            <mxPoint x="940" y="172" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Mobile API to Instructors Table -->
        <mxCell id="arrow-api-db" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#d79b00;" edge="1" parent="1" source="mobile-api" target="instructors-table">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="640" y="120" as="sourcePoint" />
            <mxPoint x="460" y="380" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Regular User flows -->
        <!-- User to React App -->
        <mxCell id="arrow1" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#2F5233;" edge="1" parent="1" source="user" target="react-app">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="180" y="230" as="sourcePoint" />
            <mxPoint x="230" y="180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Admin User to Admin Panel -->
        <mxCell id="arrow-admin" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9673a6;" edge="1" parent="1" source="admin-user" target="location-override">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="180" y="330" as="sourcePoint" />
            <mxPoint x="360" y="320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- React App to Location Context -->
        <mxCell id="arrow-context" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#82b366;" edge="1" parent="1" source="react-app" target="location-context">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="190" as="sourcePoint" />
            <mxPoint x="380" y="190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- React App to Location Middleware (through context) -->
        <mxCell id="arrow2" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#1A4A80;" edge="1" parent="1" source="location-context" target="location-middleware">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="480" y="190" as="sourcePoint" />
            <mxPoint x="600" y="165" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Location Middleware to Edge Functions -->
        <mxCell id="arrow-middleware" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#d6b656;" edge="1" parent="1" source="location-middleware" target="edge-functions">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="740" y="165" as="sourcePoint" />
            <mxPoint x="760" y="165" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Edge Functions to Backend Services -->
        <mxCell id="arrow-services" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#6c8ebf;" edge="1" parent="1" source="edge-functions" target="backend-services">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="820" y="200" as="sourcePoint" />
            <mxPoint x="670" y="310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Backend Services to Context Propagation -->
        <mxCell id="arrow-propagation" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#d6b656;" edge="1" parent="1" source="backend-services" target="context-propagation">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="740" y="340" as="sourcePoint" />
            <mxPoint x="760" y="340" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Context Propagation to Database (Filtered Queries) -->
        <mxCell id="arrow3" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#B8860B;" edge="1" parent="1" source="context-propagation" target="supabase-db">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="820" y="370" as="sourcePoint" />
            <mxPoint x="390" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Admin Override to Backend Services -->
        <mxCell id="arrow-admin-override" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9673a6;strokeDashArray=5,5;" edge="1" parent="1" source="admin-override" target="backend-services">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="830" y="310" as="sourcePoint" />
            <mxPoint x="740" y="320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Edge Functions to External Services -->
        <mxCell id="arrow4" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#B85450;" edge="1" parent="1" source="edge-functions" target="supabase-service">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="165" as="sourcePoint" />
            <mxPoint x="940" y="185" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Labels for arrows -->
        <mxCell id="label-mobile-fields" value="fields=id,name" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1;fontColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="420" y="40" width="80" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="label-mobile-limit" value="LIMIT 50" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1;fontColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="720" y="65" width="60" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="mobile-annotation" value="ðŸ“± Mobile-optimized payload&#xa;â€¢ Lazy search icon ðŸ”&#xa;â€¢ Response limiter (50)&#xa;â€¢ Skeleton loader&#xa;â€¢ Empty state handling" style="text;html=1;strokeColor=#d79b00;fillColor=#ffe6cc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="10" width="180" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="label1" value="HTTP/HTTPS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="170" y="210" width="60" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="label2" value="Admin Access" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="170" y="310" width="80" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="label3" value="Context Aware" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="490" y="170" width="80" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="label4" value="Edge Processing" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="750" y="120" width="80" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="label5" value="Location Filter" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="780" y="350" width="80" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="label6" value="RLS + Audited" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="550" y="370" width="80" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="label7" value="External APIs" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="860" y="140" width="60" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="label8" value="POS Integration" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="450" y="625" width="60" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="integration-detail" value="Multi-POS Adapters&#xa;(SDK Pattern)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="440" y="580" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-integration" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#B85450;" edge="1" parent="1" source="pos-integration" target="integration-detail">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="450" y="625" as="sourcePoint" />
            <mxPoint x="500" y="575" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>